<!DOCTYPE html>
<html lang="en">

<head>
  <title>클레이튼 기반 투표 플랫폼</title>
  <meta charset="utf-8">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="index.js"></script>
</head>

<body style="background: rgb(15, 29, 38); font-family: TmoneyRoundWindRegular">
  <div>
    <nav class="navbar navbar-expand-md navbar-dark" style="background: rgb(36, 50, 60);">
      <a class="navbar-brand" href="index.html" style="margin-left: 10px;">Btoo<img src="images/voting.png" style="height: 38px; margin-left: 5px; overflow: hidden; display:none"></a>
      <button class="navbar-toggler" type="button" style="margin-right: 15px;" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home </a>
          </li>
          <li class="nav-item" id="new_vote" style="display: none;">
            <a class="nav-link" href="#" data-toggle="modal" data-target="#genModal">새 투표</a>
          </li>
          <li class="nav-item" id="list_vote" style="display: none;">
            <a class="nav-link" href="#" onclick="App.changeUIlist()">투표 게시판</a>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto">
          <li class="nav-item" id="login">
            <a class="nav-link" href="#" data-toggle="modal" data-target="#loginModal">로그인</a>
           </li>
           <li class="nav-item" id="logout" style="display: none;">
            <a class="nav-link" href="index.html" onclick="App.handleLogout()">로그아웃</a>
           </li>
           <li class="nav-item float-right">
             <a class="nav-link" href="#" onclick="App.changeUIhelp()">도움말</a>
           </li>
        </ul>
      </div>
    </nav>
    <br>
  </div>
  <div id="intro">
    <div class="container-fluid" style="width: 90%;"><br>
      <div style="font-size: 40px; color:whitesmoke;">Btoo: 블록체인 기반 온라인 비밀 투표 시스템<br></div>
      <br>
      <div style="width:100%; border-width: 0px 0px 2px; border-style: solid; border-color: gray; padding-bottom:30px; margin:auto; margin-bottom:30px; text-align: center;">
      <div class="row">
          <div class="col-lg-5 col-md-5 col-sm-12 col-12" style="color:whitesmoke; text-align: center; margin:auto;"><img src="images/voting.png" style="width: 40%; height: auto;"></div>
          <div class="col-lg-1 col-md-1 col-sm-12 col-12" style="color:whitesmoke; text-align: center; margin:auto; font-size: 64px;">x</div>
          <div class="col-lg-6 col-md-6 col-sm-12 col-12" style="color:whitesmoke; text-align: center; margin:auto;"><img src="images/klaytn.png" style="width: 80%; height: auto;"></div>
      </div>
    </div>
      <div class="row">
        <div class="col-lg-3 col-md-3 col-sm-6"style="color:whitesmoke; margin: auto; margin-top: 5px;text-align: left;">
          <div style="font-size:32px; color:rgb(130, 177, 255); text-align: center;margin-bottom: 10px;">Btoo란?</div>
          <div style="font-size:23px; margin: 5px 10px 10px 10px;">Btoo는 Blockchain tally on online으로 블록체인 기반 온라인 투표 서비스입니다. 선거의 4원칙인 "보통 선거", "평등 선거", "직접 선거", "비밀 선거" 중에 블록체인에서 구현하기 힘든 비밀 선거를 Btoo만의 암호화 알고리즘을 통해 실현하여 신뢰성 있는 투표를 가능하게 합니다!</div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-6"style="color:whitesmoke; margin: auto; margin-top: 5px; text-align: left;">
          <div style="font-size:32px; color:rgb(130, 177, 255); text-align: center;margin-bottom: 10px;">블록체인 기반 투표</div>
          <div style="font-size:23px;margin: 5px 10px 10px 10px;">블록체인은 모두가 데이터를 공유하면서 연결되기 때문에 한번 기록된 데이터의 변경은 불가능합니다. 이는 투표를 할 때 자신이 투표한 결과가 바뀌지 않는 다는 것을 의미합니다. 혹시 모를 부정 행위에 있어서 블록체인 기반 투표 서비스는 완벽히 자유롭습니다.</div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-6"style="color:whitesmoke; margin: auto; margin-top: 5px; text-align: left;">
          <div style="font-size:32px; color:rgb(130, 177, 255); text-align: center;margin-bottom: 10px;">철저한 비밀 투표</div>
          <div style="font-size:23px;margin: 5px 10px 10px 10px;">블록체인은 모두가 데이터를 공유하기 때문에 자신이 보낸 데이터가 노출된다는 문제가 있습니다. 하지만 Btoo는 비밀 투표의 줄임말로써 투표 데이터 암호화 기술을 통해 자신이 보내는 데이터가 보여질지여도 누구에게 투표하였는지는 알 수 없습니다.</div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-6"style="color:whitesmoke; margin: auto; margin-top: 5px; text-align: left;">
          <div style="font-size:32px; color:rgb(130, 177, 255); text-align: center;margin-bottom: 10px;">연계성</div>
          <div style="font-size:23px;margin: 5px 10px 10px 10px;">클레이튼은 카카오의 블록체인 관련 자회사 그라운드X가 개발한 분산어플리케이션 디앱을 만들기 위한 블록체인 개발 플랫폼입니다. 클레이튼의 에코시스템에는 다양한 기업들이 참여하며 그로 인해 클레이튼을 기반으로 다양한 서비스와 쉽게 연동이 가능합니다.</div>
        </div>
      </div>     
    </div>
    <br>
  </div>

  <div class="voting-list" id="help" style="margin-top: 5%; display: none;">
    <div class="container-fluid"><br>
      <div style="font-size: xx-large;">사용 방법<br></div>
      <br>
      <details class="helps">
        <summary>계정 생성 및 로그인</summary><br>
        <a href="https://baobab.wallet.klaytn.com/">클레이튼 테스트넷</a>에 접속하여 Create Account를 통해 keystore 파일과 개인키를 저장합니다. <br>
        그 후 우측 상단에 있는 로그인 버튼을 눌러 발급받은 keystore 파일 + 비밀번호 혹은 개인키를 통하여 로그인 합니다.
      </details><br>
      <details class="helps">
        <summary>새 투표 생성</summary><br>
        로그인을 할 경우 상단 메뉴 바에 "새 투표" 버튼이 생기게 됩니다. 해당 버튼을 누르고 투표 이름과 제한시간(초)를 입력하시면 새로운 투표가 생성됩니다.
      </details><br>
      <details class="helps">
        <summary>투표 목록 확인</summary><br>
        로그인을 할 경우 상단 메뉴 바에 "투표 게시판" 버튼이 생기게 됩니다. 해당 버튼을 누르면 투표들의 이름과 현재 상황, 남은 시간을 확인 할 수 있습니다.
      </details><br>
      <details class="helps">
        <summary>투표자/후보 등록</summary><br>
        투표 게시판에서 "등록 단계"의 투표에 들어가게 되면 "투표자 등록"과 "새 후보" 버튼이 있습니다. "투표자 등록" 버튼을 누를 경우 투표의 권한을 얻게 되고 "새 후보" 버튼을 누를 경우 새로운 후보를 추가할 수 있게 됩니다.
      </details><br>
      <details class="helps">
        <summary>투표 단계 조정</summary><br>
        투표 게시판에서 선택한 투표가 자신이 생성한 투표일 경우 페이지 하단에 버튼들이 보이게 됩니다. "등록 단계"와 "투표 단계" 버튼을 통해 각 단계로 변경할 수 있습니다. "결과 확인" 버튼과 "복원 확인" 버튼은 결과 확인 및 복원 단계에 사용됩니다.
      </details><br>
      <details class="helps">
        <summary>투표</summary><br>
        투표 게시판에서 투표 단계에 있는 투표를 고를 경우 후보지가 보이게 됩니다. 후보지를 선택할 경우 해당 투표에 등록한 경우 투표가 완료됩니다.
      </details><br>
      <details class="helps">
        <summary>결과 확인 및 복원</summary><br>
        투표 단계를 조정할 수 있는 경우 투표가 끝난 뒤 "결과 확인" 버튼을 눌러 결과를 확인할 수 있습니다. 만일 누군가가 투표를 하지 않았을 경우 자동으로 복원 단계에 돌입하게 됩니다. 복원 단계의 투표에서는 투표에 등록했으며 투표를 진행한 사람이 투표 복원을 눌러야 합니다.
        모든 사람이 투표 복원을 완료할 경우 "복원 확인" 버튼을 눌러 투표 결과를 확인할 수 있습니다.
      </details>
    </div>
    <br>
  </div>

  <div class="voting-list" id="voting-list-container" style="display: none;">
    <br>
    <div style="font-size: xx-large;">투표 목록</div>
    <div class="container-fluid" >
        <div class="col" id="voting-list">
          <!-- 투표 목록 들어갈 곳 -->
        </div>
    </div>
    <br>
  </div>
  <br>
  <div class="voting-list" id="votename" style="display: none;">
    <div id="name" style="width:70%; margin:auto; border-style: solid; border-color: gray; border-width: 0px 0px 1px;"></div>
    <div class="row" id="enroll" style="display: none;">
      <div class="btn col-lg-4 col-md-4 col-sm-7 col-7" onclick="App.enroll_voter()">
        투표자 등록
      </div>
      <div class="btn col-lg-4 col-md-4 col-sm-7 col-7" data-toggle="modal" data-target="#enrollModal_candidate" style="margin-bottom: 40px; margin-top: 40px;">
        새 후보
      </div>
    </div>
    <div id="vote" style="display: none;">
    </div>
    <div id="result" style="display: none;">
    </div>
    <div class="voting-list" id="additional" style="display: none;">
      <div class="btn" onclick="App.additional_vote()" style="margin-bottom: 40px;">
        투표 복원
      </div>
    </div>
  </div>
</div>
<div class="control" id="controls" style="display: none;">
  <div class="btn" onclick="App.changeRound1()">
    등록 단계
  </div>
  <div class="btn" data-toggle="modal" data-target="#VotetimeModal">
    투표 단계
  </div>
  <div class="btn" onclick="App.changeRound3()">
    결과 확인
  </div>
  <div class="btn" onclick="App.changeRound4()">
    복원 확인
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="loginModal">
  <div class="modal-dialog modal-md">
    <div class="modal-content">         
      <div class="modal-body">
        <div class="form-group">
          <label for="keystore">Keystore</label>
          <br>
          <input type="file" id="keystore" onchange="App.handleImport()">
        </div>
        <div class="form-group">
          <label for="input-password">비밀번호</label>
          <input type="password" class="form-control" id="input-password" onchange="App.handlePassword()" onKeyup="javascript:if(event.keyCode==13) {App.handleLogin()}">
          <p class="help-block" id="message"></p>
        </div>
        <button type="button" class="btn-default" id="submit" data-dismiss="modal" data-toggle="modal" data-target="#loginModal_key">개인 키 로그인</button>
        <div style="float: right;">
          <button type="button" class="btn-default" id="submit" onclick="App.handleLogin()">제출</button>
          <button type="button" class="btn-default" data-dismiss="modal">닫기</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="loginModal_key">
  <div class="modal-dialog modal-md">
    <div class="modal-content">         
      <div class="modal-body">
        <div class="form-group">
          <label for="input-password">개인 키</label>
          <input type="password" class="form-control" id="input-PrivateKey" onchange="App.handlePrivateKey()" onKeyup="javascript:if(event.keyCode==13) {App.handleLogin()}">
          <input type="checkbox" id="show_key" valstyle="margin-right: 3px;"> 보이기</button>
          <script>
            $('#show_key').change(function(){
              if($('#show_key').is(':checked')){
                $('#input-PrivateKey').prop("type","text")
              }else{
                $('#input-PrivateKey').prop("type","password")
              }
            });
            </script>             
          <p class="help-block" id="message"></p>
        </div>
        <button type="button" class="btn-default" id="submit" data-dismiss="modal" data-toggle="modal" data-target="#loginModal">keystore 로그인</button>
        <div style="float: right;">
          <button type="button" class="btn-default" id="submit" onclick="App.handleLogin()">제출</button>
          <button type="button" class="btn-default" data-dismiss="modal">닫기</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="VotetimeModal">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">         
      <div class="modal-body">
        <div class="form-group">
          <label for="input-password">제한 시간</label>
          <input class="form-control" onchange="App.handleVotime()">
          <p class="help-block" id="message"></p>
        </div>
        <div style="float: right;">
          <button type="button" class="btn-default" id="submit" onclick="App.changeRound2()">제출</button>
          <button type="button" class="btn-default" data-dismiss="modal">닫기</button>
        </div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div class="modal fade" tabindex="-1" role="dialog" id="enrollModal_candidate">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">         
      <div class="modal-body">
        <div class="form-group">
          <label for="input-text">후보 내용을 입력하세요</label>
          <input type="candidate" class="form-control" id="input-candidate" onchange="App.handleCandidate()">
          <p class="help-block" id="message"></p>
        </div>
        <div style="float: right;">
          <button type="button" class="btn-default" id="submit" onclick="App.enroll_candidate()">제출</button>
          <button type="button" class="btn-default" data-dismiss="modal">닫기</button>
        </div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="genModal">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">         
      <div class="modal-body">
        <div class="form-group">
          <label for="input-text">투표 이름을 입력하세요</label>
          <input  class="form-control"  onchange="App.handleVotingName()">
          <p class="help-block" id="message"></p>
        </div>
        <div class="form-group">
          <label for="input-text">등록 제한 시간을 입력하세요(초)</label>
          <input  class="form-control"  onchange="App.handleVotingTime()">
          <p class="help-block" id="message"></p>
        </div>
        <div style="float: right;">
          <button type="button" class="btn-default" id="submit" onclick="App.genVoting()">제출</button>
          <button type="button" class="btn-default" data-dismiss="modal">닫기</button>
        </div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

</body>

</html>

<style>
    .header{
        margin: auto;
        text-align: center;
        line-height: 50px;
        font-size: x-large; 
        font-weight: bold;
        height: 50px;
        width: 90%;
        border-radius: 15px;
    }

    .voting-list{
        display: table;
        margin: auto;
        text-align: center;
        font-size: x-large; 
        font-weight: normal;
        color: rgb(130, 177, 255);
        background: rgb(42,61,74);
        width: 55%;
        margin-top: 5%;
        border-radius: 15px;
    }
    .voting{
        margin: auto;
        text-align: center;
        font-size: x-large; 
        font-weight: normal;
        color: rgb(130, 177, 255);
        background: rgba(42,61,74);
        width: 90%;
        border-radius: 15px;
    }
    .btn{
      margin: auto;
      text-align: center;
      line-height: 35px;
      font-size: x-large; 
      font-weight: normal;
      color: white;
      background: rgb(65, 84, 98);
      height: 50px;
      width: 150px;
      border-radius: 15px;
    }
    .modal-body{
      color:white;
      background: rgb(42, 61, 74);
    }
    .modal-footer{
      color:white;
      background: rgb(42, 61, 74);
    }
    @media screen and (max-width: 768px){
      .voting-list{
        width: 95%;
      }
    }
    .vote{
      border-style: solid;
      border-width: 1px;
      border-radius: 10px;
      padding-top: 10px;
      padding-bottom: 10px;
      margin-top: 10px;
      margin-bottom: 10px;
      color:white;
      background-color: rgba(255, 255, 255, 0.322);
      border-color: rgba(255, 255, 255, 0.322);
    }
    .helps{
      color:whitesmoke; 
      text-align: left; 
      margin: 0px 45px 0px 10px;
    }
    .control{
      margin: auto;
      text-align: center;
      font-size: x-large; 
      font-weight: bold;
      line-height: 100px;
      width: 90%;
      border-radius: 15px;
    }
    @font-face {
    font-family: 'TmoneyRoundWindRegular';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-07@1.0/TmoneyRoundWindRegular.woff') format('woff');
    font-weight:normal;
    font-style: normal;
}
</style>
